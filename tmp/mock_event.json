{
    "pull_request":  {
                         "body":  "## Summary\r\n\r\nImplements Phase 1 Setup (T001, T002, T003, T045) for Week 8 Identity Platform. Establishes:\r\n- Environment variable configuration for Firebase Web + Admin SDKs\r\n- CI Spectral linting for OpenAPI contracts with artifact generation\r\n- OpenAPI sync script (canonical YAML ??? JSON) with drift detection\r\n- Google Secret Manager documentation and .env.example validation\r\n\r\nAll Must-Fix items from code review addressed: ASCII compatibility, version alignment (Node 20.x, Spectral 6.11.0), OpenAPI drift resolution (3.0.3), and CI drift detection.\r\n\r\n## Linear Key(s)\r\n\r\nCloses DEV-598,DEV-599,DEV-600,DEV-601\r\n\r\n## Gate Run\r\n\r\n???? Will be available after CI completes: https://github.com/Maximus-Technologies-Uganda/Training/actions\r\n\r\n## Gate Artifacts\r\n\r\n- **Contracts**: `specs/008-identity-platform/contracts/spectral-report.json`\r\n- **Secret Validation**: Gate secrets check passes (no real secrets detected)\r\n- **Typecheck**: No TypeScript errors (api, frontend-next)\r\n- **OpenAPI Drift**: contracts:check passes (canonical YAML = api/openapi.json)\r\n\r\n## Demo URL(s)\r\n\r\nPreview deployment: TBD (will deploy after merge to main)\r\n\r\nMain: \r\n- Frontend: https://maximus-training-frontend-673209018655.africa-south1.run.app\r\n- API: https://maximus-training-api-wyb2jsgqyq-bq.a.run.app\r\n\r\n## Screenshots (UI changes)\r\n\r\nN/A - Infrastructure/tooling changes only (no UI changes)\r\n\r\n## Linked Plan (/specify /plan /tasks)\r\n\r\n- Spec: [specs/008-identity-platform/spec.md](https://github.com/Maximus-Technologies-Uganda/Training/blob/chore/T001-env-flags-setup-DEV-598/specs/008-identity-platform/spec.md)\r\n- Plan: [specs/008-identity-platform/plan.md](https://github.com/Maximus-Technologies-Uganda/Training/blob/chore/T001-env-flags-setup-DEV-598/specs/008-identity-platform/plan.md)\r\n- Tasks: [specs/008-identity-platform/tasks.md](https://github.com/Maximus-Technologies-Uganda/Training/blob/chore/T001-env-flags-setup-DEV-598/specs/008-identity-platform/tasks.md)\r\n\r\n## Risk / Impact\r\n\r\n**Risk Level**: Low\r\n\r\n**Impact**:\r\n- Adds new CI job (contracts-spectral) - 5-minute timeout, no blocking issues\r\n- Adds pretest hook (contracts:sync) - fast YAML???JSON conversion\r\n- New dependencies: tsx@^4.19.2, yaml@^2.6.1 (dev tools, minimal footprint)\r\n- OpenAPI spec changed: 3.1.0 ??? 3.0.3 (alignment with canonical spec)\r\n\r\n**Mitigation**:\r\n- All changes backward-compatible (no API/frontend runtime changes)\r\n- contracts:sync runs before tests (catches drift early)\r\n- .env.example files validated in CI (prevents secret leaks)\r\n\r\n## Rollback Plan\r\n\r\n1. Revert merge commit: `git revert \u003cmerge-sha\u003e`\r\n2. Restore previous package.json dependencies: `npm ci`\r\n3. Restore api/openapi.json from main if needed\r\n4. Disable contracts-spectral job in .github/workflows/ci.yml (set `if: false`)\r\n\r\n**Recovery Time**: \u003c 5 minutes\r\n\r\n## Checklist\r\n\r\n### Tasks Completed\r\n- [x] T001: Environment variables setup (.env.example, quickstart docs, gitleaks)\r\n- [x] T002: CI Spectral lint job (contracts-spectral, artifact upload)\r\n- [x] T003: OpenAPI sync script (scripts/sync-openapi.ts, drift detection)\r\n- [x] T045: Secret Manager docs + validation (check-secret-patterns.js)\r\n\r\n### Quality Fixes\r\n- [x] Remove non-ASCII glyphs from scripts and CI workflow\r\n- [x] Fix encoding artifact in api/.env.example (\u003e= 32 chars)\r\n- [x] Align package.json engines to Node \u003e=20\r\n- [x] Pin Spectral CLI to exact version 6.11.0\r\n- [x] Add contracts:check to CI for drift detection\r\n- [x] Resolve OpenAPI version drift (3.0.3 canonical ??? JSON)\r\n\r\n### Validation\r\n- [x] Pre-push hook passes (typecheck + lint)\r\n- [x] npm run gate:secrets passes\r\n- [x] npm run contracts:sync passes\r\n- [x] npm run contracts:check passes (no drift)\r\n- [x] All .env.example files use safe placeholders\r\n- [x] No real secrets detected by validation\r\n\r\n### Documentation\r\n- [x] Quickstart updated with env tables and setup instructions\r\n- [x] Secret Manager section added (gcloud CLI, IAM, Cloud Run, GitHub Actions)\r\n- [x] CORS guidance documented (CSV format, credentials=true safeguards)\r\n- [x] Firebase emulator setup hints included\r\n- [x] Tasks.md updated (T001-T045 marked complete)\r\n\r\n### Review Alignment\r\n- [x] Meets all task requirements from tasks.md\r\n- [x] Implements Phase 1 Setup from plan.md\r\n- [x] Addresses FR-001 to FR-004 (Identity Platform) from spec.md\r\n- [x] All Must-Fix items from code review resolved\r\n\r\n---\r\n\r\n**Generated with [Claude Code](https://claude.com/claude-code)**\r\n",
                         "labels":  [

                                    ]
                     }
}
